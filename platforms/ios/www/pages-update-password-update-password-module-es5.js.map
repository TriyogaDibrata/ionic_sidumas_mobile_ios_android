{"version":3,"sources":["./src/app/pages/update-password/update-password.page.html","./src/app/pages/update-password/update-password.module.ts","./src/app/pages/update-password/update-password.page.scss","./src/app/pages/update-password/update-password.page.ts"],"names":[],"mappings":"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","file":"pages-update-password-update-password-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button>\\n      </ion-back-button>\\n    </ion-buttons>\\n    <ion-title>Perbarui Password</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"ion-no-padding\\\">\\n  <ion-row class=\\\"ion-justify-content-center\\\">\\n    <ion-col size=\\\"12\\\" size-md=\\\"6\\\" size-xl=\\\"6\\\">\\n\\n      <form [formGroup]=\\\"updateForm\\\" (ngSubmit)=\\\"update(updateForm)\\\">\\n        <ion-item no-padding>\\n          <ion-input placeholder=\\\"Kata Sandi Lama\\\" type=\\\"password\\\" id=\\\"old_password\\\" name=\\\"old_password\\\"\\n            formControlName=\\\"old_password\\\" required></ion-input>\\n        </ion-item>\\n        <ion-item no-padding>\\n          <ion-input placeholder=\\\"Kata Sandi\\\" type=\\\"password\\\" id=\\\"new_password\\\" name=\\\"new_password\\\"\\n            formControlName=\\\"new_password\\\" required></ion-input>\\n        </ion-item>\\n        <ion-item no-padding>\\n          <ion-input placeholder=\\\"Konfirmasi Kata Sandi\\\" type=\\\"password\\\" id=\\\"c_new_password\\\" name=\\\"c_new_password\\\"\\n            formControlName=\\\"c_new_password\\\" required></ion-input>\\n        </ion-item>\\n        <ion-button expand=\\\"block\\\" shape=\\\"round\\\" type=\\\"submit\\\" [disabled]=\\\"!updateForm.valid\\\"\\n          color=\\\"danger\\\" class=\\\"ion-margin-top\\\">Simpan</ion-button>\\n      </form>\\n\\n    </ion-col>\\n  </ion-row>\\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { UpdatePasswordPage } from './update-password.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: UpdatePasswordPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [UpdatePasswordPage]\n})\nexport class UpdatePasswordPageModule {}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3VwZGF0ZS1wYXNzd29yZC91cGRhdGUtcGFzc3dvcmQucGFnZS5zY3NzIn0= */\"","import { Component, OnInit } from '@angular/core';\nimport { FormGroup, FormBuilder, Validators, AbstractControl } from '@angular/forms';\nimport { SharedService } from 'src/app/services/shared/shared.service';\nimport { LoadingController, NavController } from '@ionic/angular';\nimport { AlertService } from 'src/app/services/alert/alert.service';\n\n@Component({\n  selector: 'app-update-password',\n  templateUrl: './update-password.page.html',\n  styleUrls: ['./update-password.page.scss'],\n})\nexport class UpdatePasswordPage implements OnInit {\n\n  updateForm      : FormGroup;\n  user            : any = {};\n  loading         : any;\n\n\n  constructor(private formBuilder     : FormBuilder,\n              private sharedService   : SharedService,\n              public loadingCtrl      : LoadingController,\n              public alertService     : AlertService,\n              public navCtrl          : NavController,\n             ) { }\n\n  ionViewWillEnter(){\n    this.getUser();\n  }\n\n  ngOnInit() {\n    this.updateForm = this.formBuilder.group({\n      'old_password' : [null, Validators.compose([\n        Validators.required,\n      ])],\n      'new_password' : [null, Validators.compose([\n        Validators.required\n      ])],\n      'c_new_password': [null, Validators.compose([\n        Validators.required\n      ])]\n    }, {\n      validator: this.matchPassword\n    });\n  }\n\n  async showLoading(){\n    this.loading = await this.loadingCtrl.create(this.sharedService.loadingOption);\n\n    await this.loading.present();\n  }\n\n  private matchPassword(AC: AbstractControl){\n    const password    = AC.get('new_password').value;\n    const c_password  = AC.get('c_new_password').value;\n\n    if(password != c_password){\n      AC.get('c_new_password').setErrors({ matchPassword: true })\n    } else {\n      AC.get('c_new_password').setErrors(null);\n    }\n  }\n\n  getUser(){\n    this.user = this.sharedService.getUserCache();\n  }\n\n  update(form: FormGroup){\n    this.showLoading();\n    let data = {\n      'id'  : this.user['id'],\n      'old' : form.value.old_password,\n      'new' : form.value.new_password\n    }\n\n    this.sharedService.updatePassword(data)\n    .subscribe(data => {\n      console.log(data);\n      if(data['success']){\n        this.loading.dismiss();\n        this.navCtrl.navigateRoot('app/tabs/profile');\n        this.alertService.presentToast(data['message']);\n      } else {\n        this.loading.dismiss();\n        this.alertService.presentAlert('Gagal memperbaharui password', data['message']);\n      }\n    }, err => {\n      this.loading.dismiss();\n      this.alertService.presentAlert('Terjadi kesalahan', err);\n    });\n  }\n\n}\n"],"sourceRoot":""}