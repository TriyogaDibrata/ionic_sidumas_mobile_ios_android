{"version":3,"sources":["./src/app/pages/lapor/lapor.page.html","./src/app/pages/lapor/lapor.module.ts","./src/app/pages/lapor/lapor.page.scss","./src/app/pages/lapor/lapor.page.ts"],"names":[],"mappings":"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","file":"pages-lapor-lapor-module-es2015.js","sourcesContent":["module.exports = \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>Buat Pengaduan</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"ion-no-padding\\\">\\n  <ion-row class=\\\"ion-justify-content-center ion-no-padding\\\">\\n    <ion-col size=\\\"12\\\" size-md=\\\"6\\\" size-xl=\\\"6\\\" class=\\\"ion-no-padding\\\">\\n\\n      <ion-item>\\n        <ion-textarea [(ngModel)]=\\\"topik\\\" placeholder=\\\"Judul Pengaduan\\\" rows=\\\"3\\\" autocapitalize></ion-textarea>\\n      </ion-item>\\n\\n      <ion-item>\\n        <ion-textarea placeholder=\\\"Deskripsi Pengaduan\\\" [(ngModel)]=\\\"uraian\\\" rows=\\\"10\\\" auto-grow autocapitalize>\\n        </ion-textarea>\\n      </ion-item>\\n\\n      <ion-item class=\\\"ion-no-padding\\\">\\n        <ion-label class=\\\"toggle-label\\\">Rahasiakan Identitas</ion-label>\\n        <ion-toggle [(ngModel)]=\\\"hide_identity\\\" (ngModelChange)=\\\"hide_id()\\\"></ion-toggle>\\n      </ion-item>\\n\\n      <ion-item class=\\\"ion-no-padding\\\">\\n        <ion-label class=\\\"toggle-label\\\">Rahasiakan Pengaduan</ion-label>\\n        <ion-toggle [(ngModel)]=\\\"hide_report\\\" (ngModelChange)=\\\"hide_rp()\\\"></ion-toggle>\\n      </ion-item>\\n\\n      <ion-item (click)=\\\"chooseLocation()\\\">\\n        <ion-label position=\\\"stacked\\\">\\n          <ion-chip>\\n            <ion-icon name=\\\"pin\\\" color=\\\"danger\\\"></ion-icon>\\n            <ion-text>Pilih Lokasi</ion-text>\\n          </ion-chip>\\n        </ion-label>\\n        <ion-textarea [(ngModel)]=\\\"address\\\" readonly auto-grow></ion-textarea>\\n      </ion-item>\\n\\n    </ion-col>\\n  </ion-row>\\n</ion-content>\\n\\n<ion-footer>\\n  <ion-toolbar class=\\\"ion-text-center ion-no-padding\\\" color=\\\"none\\\">\\n    <ion-button expand=\\\"full\\\" size=\\\"large\\\" (click)=\\\"check()\\\" color=\\\"danger\\\">Lanjutkan</ion-button>\\n  </ion-toolbar>\\n</ion-footer>\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LaporPage } from './lapor.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LaporPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ReactiveFormsModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [LaporPage]\n})\nexport class LaporPageModule {}\n","module.exports = \"ion-content {\\n  font-family: Lato-Regular;\\n  --ion-font-family: Lato-Regular;\\n}\\n\\n.toggle-label {\\n  margin-left: 16px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy90cml5b2dhZGlicmF0YS9Eb2N1bWVudHMvbXlfcHJvamVjdC9tb2JpbGVfc2lkdW1hc19pb3Mvc3JjL2FwcC9wYWdlcy9sYXBvci9sYXBvci5wYWdlLnNjc3MiLCJzcmMvYXBwL3BhZ2VzL2xhcG9yL2xhcG9yLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLHlCQUFBO0VBQ0EsK0JBQUE7QUNDSjs7QURFQTtFQUNJLGlCQUFBO0FDQ0oiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9sYXBvci9sYXBvci5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24tY29udGVudHtcbiAgICBmb250LWZhbWlseSA6IExhdG8tUmVndWxhcjtcbiAgICAtLWlvbi1mb250LWZhbWlseSA6IExhdG8tUmVndWxhcjtcbn1cblxuLnRvZ2dsZS1sYWJlbHtcbiAgICBtYXJnaW4tbGVmdDogMTZweDtcbn0iLCJpb24tY29udGVudCB7XG4gIGZvbnQtZmFtaWx5OiBMYXRvLVJlZ3VsYXI7XG4gIC0taW9uLWZvbnQtZmFtaWx5OiBMYXRvLVJlZ3VsYXI7XG59XG5cbi50b2dnbGUtbGFiZWwge1xuICBtYXJnaW4tbGVmdDogMTZweDtcbn0iXX0= */\"","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { CommonService } from 'src/app/services/common/common.service';\nimport { NavController, ModalController, LoadingController, Platform } from '@ionic/angular';\nimport { Geolocation } from '@ionic-native/geolocation/ngx';\nimport { AlertService } from 'src/app/services/alert/alert.service';\nimport { NativeGeocoder, NativeGeocoderOptions, NativeGeocoderResult } from '@ionic-native/native-geocoder/ngx';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ModalPlacesPage } from '../../modal-places/modal-places.page';\nimport { SharedService } from 'src/app/services/shared/shared.service';\n\n@Component({\n  selector: 'app-lapor',\n  templateUrl: './lapor.page.html',\n  styleUrls: ['./lapor.page.scss'],\n})\nexport class LaporPage implements OnInit {\n\n  laporForm : FormGroup;\n\n  lat       : any;\n  lng       : any;\n  address   : any;\n  topik     : any;\n  uraian    : any;\n  kategori_id : any;\n  hide_identity: boolean = false;\n  hide_report: boolean = false;\n  loading   : any;\n\n  constructor( public formBuilder   : FormBuilder,\n               public commonService : CommonService,\n               public navCtrl       : NavController,\n               private geolocation  : Geolocation,\n               public alertService  : AlertService,\n               public nativeGeocoder: NativeGeocoder,\n               public route         : ActivatedRoute,\n               public router        : Router,\n               private modalCtrl    : ModalController,\n               public loadingCtrl   : LoadingController,\n               public platform      : Platform,\n               private sharedService: SharedService,\n               ) {\n                 this.backButtonEvent();\n               }\n\n  ngOnInit() {\n    this.laporForm = this.formBuilder.group({\n      'topik' : [null, Validators.compose([\n        Validators.required\n      ])],\n      'uraian' : [null, Validators.compose([\n        Validators.required\n      ])]\n    });\n\n    this.kategori_id = this.route.snapshot.paramMap.get('kategori_id');\n    console.log(this.kategori_id);\n  }\n\n  ionViewWillEnter(){\n    this.showLoading();\n    this.getLocation();\n  }\n\n\n  getLocation(){\n    this.geolocation.getCurrentPosition()\n    .then((resp) => {\n      this.lat = resp.coords.latitude;\n      this.lng = resp.coords.longitude;\n      console.log(this.lat, this.lng);\n      this.geocoder(this.lat, this.lng);\n      this.loading.dismiss();\n    }, err=> {\n      this.loading.dismiss();\n      this.alertService.presentAlert('Tidak dapat menemukan lokasi', 'Terjadi kesalahan saat mendapatkan lokasi');\n    });\n  }\n\n  geocoder(lat, lng){\n    let options: NativeGeocoderOptions = {\n        useLocale: true,\n        maxResults: 5\n    };\n    this.nativeGeocoder.reverseGeocode(lat, lng, options)\n      .then((result: NativeGeocoderResult[]) =>\n      {\n        this.loading.dismiss();\n        this.address = this.generateAddress(result[0]);\n      }).catch((error: any) =>\n      this.loading.dismiss());\n  }\n\n  //Return Comma saperated address\n  generateAddress(addressObj){\n      let obj = [];\n      let address = \"\";\n      for (let key in addressObj) {\n        obj.push(addressObj[key]);\n      }\n      obj.reverse();\n      for (let val in obj) {\n        if(obj[val].length)\n        address += obj[val]+', ';\n      }\n    return address.slice(0, -2);\n  }\n\n  check(){\n    if(!this.topik || !this.uraian){\n      this.alertService.presentAlert('Lengkapi laporan anda', 'Silahkan lengkapi laporan anda untuk dapat melanjutkan');\n    } else {\n      this.toFile();\n    }\n  }\n\n  toFile(){\n\n    let dataObj = {\n      'kategori_id' : this.kategori_id,\n      'topik' : this.topik,\n      'uraian' : this.uraian,\n      'alamat' : this.address,\n      'lat' : this.lat,\n      'lng' : this.lng,\n      'hide_identity' : this.hide_identity,\n      'hide_report'   : this.hide_report,\n    }\n\n    let dataString = JSON.stringify(dataObj);\n\n    this.navCtrl.navigateForward(['lapor-file', dataString]);\n  }\n\n  goTo(page){\n    this.commonService.goTo(page);\n  }\n\n  goForward(page){\n    this.commonService.goForward(page);\n  }\n\n  back(){\n    this.navCtrl.back();\n  }\n\n  hide_id() {\n    if (this.hide_identity == true) {\n      this.alertService.presentAlert('Rahasiakan Identitas', 'Dengan mengaktifkan fitur ini maka identitas anda akan di rahasiakan');\n    }\n  }\n\n  hide_rp() {\n    if (this.hide_report == true) {\n      this.alertService.presentAlert('Rahasiakan Pengaduan', 'Dengan mengaktifkan fitur ini maka pengaduan anda akan di rahasiakan');\n    }\n  }\n\n  async chooseLocation(){\n    const modal = await this.modalCtrl.create({\n      component : ModalPlacesPage,\n    });\n\n    modal.onDidDismiss().then(data => {\n      this.lat = data['data']['lat'];\n      this.lng = data['data']['lng'];\n      this.geocoder(this.lat, this.lng);\n    });\n\n    return await modal.present();\n  }\n\n  async showLoading(){\n    this.loading = await this.loadingCtrl.create(this.sharedService.loadingOption);\n\n    await this.loading.present();\n  }\n\n  backButtonEvent(){\n    this.platform.backButton.subscribe(\n      data => {\n        this.modalCtrl.dismiss();\n      }\n    )\n  }\n\n}\n"],"sourceRoot":""}